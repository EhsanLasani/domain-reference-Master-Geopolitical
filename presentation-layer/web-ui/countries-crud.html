<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countries CRUD - Reference Master Geopolitical</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: #2c3e50; color: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
        .toolbar { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .search-box { display: flex; gap: 10px; align-items: center; }
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #27ae60; color: white; }
        .btn-warning { background: #f39c12; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn:hover { opacity: 0.9; }
        input, select { padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        .countries-table { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #34495e; color: white; font-weight: bold; }
        tr:hover { background: #f8f9fa; }
        .status-active { color: #27ae60; font-weight: bold; }
        .status-inactive { color: #e74c3c; font-weight: bold; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { background: white; margin: 5% auto; padding: 30px; width: 90%; max-width: 600px; border-radius: 8px; max-height: 80vh; overflow-y: auto; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; }
        .error { color: #e74c3c; font-size: 12px; margin-top: 5px; }
        .loading { text-align: center; padding: 40px; }
        .pagination { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
        .page-btn { padding: 8px 12px; border: 1px solid #ddd; background: white; cursor: pointer; }
        .page-btn.active { background: #3498db; color: white; }
        .stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; flex: 1; }
        .stat-number { font-size: 24px; font-weight: bold; color: #3498db; }
        .error-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; }
        .error-modal-content { background: white; margin: 5% auto; padding: 30px; width: 90%; max-width: 700px; border-radius: 8px; max-height: 80vh; overflow-y: auto; }
        .error-details { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 15px; margin: 15px 0; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
        .error-header { color: #e74c3c; font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        .copy-btn { background: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; margin: 10px 5px 0 0; }
        .copy-btn:hover { background: #5a6268; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Countries Management</h1>
            <p>Complete CRUD Operations with Search & Filtering</p>
        </div>

        <div class="stats" id="statsContainer">
            <div class="stat-card">
                <div class="stat-number" id="totalCountries">0</div>
                <div>Total Countries</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="activeCountries">0</div>
                <div>Active Countries</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="inactiveCountries">0</div>
                <div>Inactive Countries</div>
            </div>
        </div>

        <div class="toolbar">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search by name or code..." style="width: 250px;">
                <select id="statusFilter">
                    <option value="">All Status</option>
                    <option value="true">Active</option>
                    <option value="false">Inactive</option>
                </select>
                <select id="continentFilter">
                    <option value="">All Continents</option>
                    <option value="AF">Africa</option>
                    <option value="AS">Asia</option>
                    <option value="EU">Europe</option>
                    <option value="NA">North America</option>
                    <option value="SA">South America</option>
                    <option value="OC">Oceania</option>
                    <option value="AN">Antarctica</option>
                </select>
                <button class="btn btn-primary" onclick="searchCountries()">Search</button>
                <button class="btn btn-primary" onclick="clearFilters()">Clear</button>
            </div>
            <div style="margin-left: auto;">
                <button class="btn btn-success" onclick="openCreateModal()">+ Add Country</button>
                <button class="btn btn-primary" onclick="loadCountries()">Refresh</button>
            </div>
        </div>

        <div class="countries-table">
            <table>
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Name</th>
                        <th>ISO3</th>
                        <th>Capital</th>
                        <th>Continent</th>
                        <th>Phone</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="countriesTableBody">
                    <tr><td colspan="8" class="loading">Loading countries...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="pagination" id="paginationContainer"></div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="error-modal">
        <div class="error-modal-content">
            <div class="error-header">‚ùå Error Details</div>
            <div id="errorMessage"></div>
            <div class="error-details" id="errorDetails"></div>
            <div>
                <button class="copy-btn" onclick="copyErrorDetails()">üìã Copy Error</button>
                <button class="copy-btn" onclick="downloadErrorLog()">üíæ Download Log</button>
                <button class="btn btn-primary" onclick="closeErrorModal()" style="margin-left: 10px;">Close</button>
            </div>
        </div>
    </div>

    <!-- Create/Edit Modal -->
    <div id="countryModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">Add New Country</h2>
            <form id="countryForm">
                <div class="form-group">
                    <label for="countryCode">Country Code (ISO 2) *</label>
                    <input type="text" id="countryCode" maxlength="2" required>
                    <div class="error" id="countryCodeError"></div>
                </div>
                <div class="form-group">
                    <label for="countryName">Country Name *</label>
                    <input type="text" id="countryName" required>
                    <div class="error" id="countryNameError"></div>
                </div>
                <div class="form-group">
                    <label for="iso3Code">ISO3 Code</label>
                    <input type="text" id="iso3Code" maxlength="3">
                </div>
                <div class="form-group">
                    <label for="numericCode">Numeric Code</label>
                    <input type="number" id="numericCode" min="1" max="999">
                </div>
                <div class="form-group">
                    <label for="officialName">Official Name</label>
                    <input type="text" id="officialName">
                </div>
                <div class="form-group">
                    <label for="capitalCity">Capital City</label>
                    <input type="text" id="capitalCity">
                </div>
                <div class="form-group">
                    <label for="continentCode">Continent</label>
                    <select id="continentCode">
                        <option value="">Select Continent</option>
                        <option value="AF">Africa</option>
                        <option value="AS">Asia</option>
                        <option value="EU">Europe</option>
                        <option value="NA">North America</option>
                        <option value="SA">South America</option>
                        <option value="OC">Oceania</option>
                        <option value="AN">Antarctica</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="phonePrefix">Phone Prefix</label>
                    <input type="text" id="phonePrefix" placeholder="+1">
                </div>
                <div class="form-group">
                    <label for="isActive">Status</label>
                    <select id="isActive">
                        <option value="true">Active</option>
                        <option value="false">Inactive</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn" onclick="closeModal()" style="background: #95a5a6; color: white;">Cancel</button>
                    <button type="submit" class="btn btn-success" id="saveBtn">Save Country</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        class CountriesCRUD {
            constructor() {
                this.baseUrl = 'http://localhost:8081/api/v1';
                this.tenantId = 'default-tenant';
                this.countries = [];
                this.currentPage = 1;
                this.pageSize = 10;
                this.totalPages = 1;
                this.editingCountry = null;
                this.errorLog = [];
                this.init();
            }

            init() {
                this.loadCountries();
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('countryForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveCountry();
                });

                document.getElementById('searchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchCountries();
                });
            }

            async makeRequest(endpoint, options = {}) {
                const headers = {
                    'Content-Type': 'application/json',
                    'X-Tenant-ID': this.tenantId,
                    'X-Request-ID': 'req_' + Math.random().toString(36).substr(2, 9),
                    ...options.headers
                };

                try {
                    const response = await fetch(`${this.baseUrl}${endpoint}`, {
                        ...options,
                        headers
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        const error = errorData.error || {};
                        
                        // Create detailed error message
                        let errorMsg = error.message || `HTTP ${response.status}`;
                        if (error.code) errorMsg += ` (${error.code})`;
                        if (error.layer) errorMsg += ` [${error.layer.toUpperCase()}]`;
                        if (error.details) errorMsg += `\nDetails: ${error.details}`;
                        if (error.country_code) errorMsg += `\nCountry: ${error.country_code}`;
                        
                        console.error('API Error Details:', {
                            endpoint,
                            status: response.status,
                            error: errorData
                        });
                        
                        throw new Error(errorMsg);
                    }

                    return await response.json();
                } catch (error) {
                    if (error.name === 'TypeError' && error.message.includes('fetch')) {
                        const networkError = new Error('Network connection failed. Please check if the server is running.');
                        this.logError('NETWORK', endpoint, networkError, { originalError: error.message });
                        throw networkError;
                    }
                    this.logError('API', endpoint, error, { status: 'unknown', options });
                    throw error;
                }
            }

            async loadCountries(page = 1) {
                try {
                    const params = new URLSearchParams({
                        page: page.toString(),
                        limit: this.pageSize.toString()
                    });

                    const search = document.getElementById('searchInput').value;
                    const status = document.getElementById('statusFilter').value;
                    const continent = document.getElementById('continentFilter').value;

                    if (search) params.append('search', search);
                    if (status) params.append('is_active', status);
                    if (continent) params.append('continent_code', continent);

                    const data = await this.makeRequest(`/countries?${params}`);
                    
                    this.countries = data.countries || [];
                    this.currentPage = page;
                    this.totalPages = Math.ceil((data.total || this.countries.length) / this.pageSize);
                    
                    this.renderCountries();
                    this.renderPagination();
                    this.updateStats();
                } catch (error) {
                    this.logError('LOAD_COUNTRIES', 'GET', error, { page, search, status, continent });
                    document.getElementById('countriesTableBody').innerHTML = 
                        `<tr><td colspan="8" style="text-align: center; color: #e74c3c;">Failed to load countries: ${error.message}</td></tr>`;
                }
            }

            renderCountries() {
                const tbody = document.getElementById('countriesTableBody');
                
                if (this.countries.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="8" style="text-align: center;">No countries found</td></tr>';
                    return;
                }

                tbody.innerHTML = this.countries.map(country => `
                    <tr>
                        <td><strong>${country.country_code}</strong></td>
                        <td>${country.country_name}</td>
                        <td>${country.iso3_code || '-'}</td>
                        <td>${country.capital_city || '-'}</td>
                        <td>${country.continent_code || '-'}</td>
                        <td>${country.phone_prefix || '-'}</td>
                        <td>
                            <span class="${country.is_active ? 'status-active' : 'status-inactive'}">
                                ${country.is_active ? 'Active' : 'Inactive'}
                            </span>
                        </td>
                        <td>
                            <button class="btn btn-warning" onclick="editCountry('${country.country_code}')" style="padding: 5px 10px; margin-right: 5px;">Edit</button>
                            ${country.is_active ? 
                                '<button class="btn" style="padding: 5px 10px; background: #6c757d; color: white; cursor: not-allowed;" disabled title="Deactivate country first to enable deletion">Delete</button>' :
                                `<button class="btn btn-danger" onclick="deleteCountry('${country.country_code}')" style="padding: 5px 10px;">Delete</button>`
                            }
                        </td>
                    </tr>
                `).join('');
            }

            renderPagination() {
                const container = document.getElementById('paginationContainer');
                if (this.totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                let html = '';
                for (let i = 1; i <= this.totalPages; i++) {
                    html += `<button class="page-btn ${i === this.currentPage ? 'active' : ''}" onclick="app.loadCountries(${i})">${i}</button>`;
                }
                container.innerHTML = html;
            }

            updateStats() {
                const total = this.countries.length;
                const active = this.countries.filter(c => c.is_active).length;
                const inactive = total - active;

                document.getElementById('totalCountries').textContent = total;
                document.getElementById('activeCountries').textContent = active;
                document.getElementById('inactiveCountries').textContent = inactive;
            }

            searchCountries() {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    this.loadCountries(1);
                    return;
                }
                
                // Search in all loaded countries across all fields
                const tbody = document.getElementById('countriesTableBody');
                const rows = tbody.querySelectorAll('tr');
                
                let visibleCount = 0;
                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    let found = false;
                    
                    // Search in all table cells
                    cells.forEach(cell => {
                        if (cell.textContent.toLowerCase().includes(searchTerm)) {
                            found = true;
                        }
                    });
                    
                    if (found) {
                        row.style.display = '';
                        visibleCount++;
                    } else {
                        row.style.display = 'none';
                    }
                });
                
                // Update stats for visible countries
                document.getElementById('totalCountries').textContent = visibleCount;
            }

            clearFilters() {
                document.getElementById('searchInput').value = '';
                document.getElementById('statusFilter').value = '';
                document.getElementById('continentFilter').value = '';
                
                // Show all rows
                const tbody = document.getElementById('countriesTableBody');
                const rows = tbody.querySelectorAll('tr');
                rows.forEach(row => row.style.display = '');
                
                // Reset stats
                this.updateStats();
            }

            openCreateModal() {
                this.editingCountry = null;
                document.getElementById('modalTitle').textContent = 'Add New Country';
                document.getElementById('saveBtn').textContent = 'Save Country';
                document.getElementById('countryForm').reset();
                document.getElementById('isActive').value = 'true';
                this.clearErrors();
                document.getElementById('countryModal').style.display = 'block';
            }

            async editCountry(code) {
                try {
                    const country = this.countries.find(c => c.country_code === code);
                    if (!country) return;

                    this.editingCountry = country;
                    document.getElementById('modalTitle').textContent = 'Edit Country';
                    document.getElementById('saveBtn').textContent = 'Update Country';
                    
                    // Populate form
                    document.getElementById('countryCode').value = country.country_code;
                    document.getElementById('countryName').value = country.country_name;
                    document.getElementById('iso3Code').value = country.iso3_code || '';
                    document.getElementById('numericCode').value = country.numeric_code || '';
                    document.getElementById('officialName').value = country.official_name || '';
                    document.getElementById('capitalCity').value = country.capital_city || '';
                    document.getElementById('continentCode').value = country.continent_code || '';
                    document.getElementById('phonePrefix').value = country.phone_prefix || '';
                    document.getElementById('isActive').value = country.is_active.toString();
                    
                    this.clearErrors();
                    document.getElementById('countryModal').style.display = 'block';
                } catch (error) {
                    alert('Failed to load country details');
                }
            }

            async saveCountry() {
                this.clearErrors();
                
                const formData = {
                    country_code: document.getElementById('countryCode').value.toUpperCase(),
                    country_name: document.getElementById('countryName').value,
                    iso3_code: document.getElementById('iso3Code').value.toUpperCase() || null,
                    numeric_code: document.getElementById('numericCode').value ? parseInt(document.getElementById('numericCode').value) : null,
                    official_name: document.getElementById('officialName').value || null,
                    capital_city: document.getElementById('capitalCity').value || null,
                    continent_code: document.getElementById('continentCode').value || null,
                    phone_prefix: document.getElementById('phonePrefix').value || null,
                    is_active: document.getElementById('isActive').value === 'true'
                };

                // Validation
                if (!this.validateForm(formData)) return;

                try {
                    let response;
                    const updatedCode = formData.country_code;
                    
                    if (this.editingCountry) {
                        response = await this.makeRequest(`/countries/${this.editingCountry.country_code}`, {
                            method: 'PUT',
                            body: JSON.stringify(formData)
                        });
                        
                        if (response.updated) {
                            alert('Country updated successfully!');
                            this.closeModal();
                            
                            // Refresh data and focus on updated record
                            await this.loadCountries(this.currentPage);
                            this.highlightRecord(updatedCode);
                        }
                    } else {
                        response = await this.makeRequest('/countries', {
                            method: 'POST',
                            body: JSON.stringify(formData)
                        });
                        alert('Country created successfully!');
                        this.closeModal();
                        await this.loadCountries(this.currentPage);
                        this.highlightRecord(updatedCode);
                    }
                } catch (error) {
                    this.logError('SAVE_COUNTRY', this.editingCountry ? 'UPDATE' : 'CREATE', error, {
                        country_code: formData.country_code,
                        operation: this.editingCountry ? 'update' : 'create',
                        formData: formData
                    });
                    
                    this.showErrorModal('Failed to Save Country', error.message, {
                        operation: this.editingCountry ? 'UPDATE' : 'CREATE',
                        country_code: formData.country_code,
                        timestamp: new Date().toISOString(),
                        troubleshooting: [
                            'Check server console for detailed logs',
                            'Verify database connection',
                            'Check for duplicate country codes',
                            'Ensure all required fields are valid'
                        ]
                    });
                }
            }

            validateForm(data) {
                let isValid = true;

                if (!data.country_code || data.country_code.length !== 2) {
                    this.showError('countryCodeError', 'Country code must be exactly 2 characters');
                    isValid = false;
                }

                if (!data.country_name || data.country_name.length < 2) {
                    this.showError('countryNameError', 'Country name must be at least 2 characters');
                    isValid = false;
                }

                if (data.iso3_code && data.iso3_code.length !== 3) {
                    this.showError('iso3CodeError', 'ISO3 code must be exactly 3 characters');
                    isValid = false;
                }

                return isValid;
            }

            showError(elementId, message) {
                document.getElementById(elementId).textContent = message;
            }

            clearErrors() {
                const errorElements = document.querySelectorAll('.error');
                errorElements.forEach(el => el.textContent = '');
            }

            async deleteCountry(code) {
                if (!confirm(`Are you sure you want to delete country "${code}"?`)) return;

                try {
                    await this.makeRequest(`/countries/${code}`, {
                        method: 'DELETE'
                    });
                    alert('Country deleted successfully!');
                    this.loadCountries(this.currentPage);
                } catch (error) {
                    this.logError('DELETE_COUNTRY', 'DELETE', error, { country_code: code });
                }
            }

            closeModal() {
                document.getElementById('countryModal').style.display = 'none';
                this.editingCountry = null;
            }

            highlightRecord(countryCode) {
                // Find and highlight the updated record
                setTimeout(() => {
                    const tbody = document.getElementById('countriesTableBody');
                    const rows = tbody.querySelectorAll('tr');
                    
                    rows.forEach(row => {
                        const codeCell = row.querySelector('td:first-child');
                        if (codeCell && codeCell.textContent.trim() === countryCode) {
                            // Highlight the row
                            row.style.backgroundColor = '#d4edda';
                            row.style.border = '2px solid #27ae60';
                            
                            // Scroll to the row
                            row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            // Remove highlight after 3 seconds
                            setTimeout(() => {
                                row.style.backgroundColor = '';
                                row.style.border = '';
                            }, 3000);
                        }
                    });
                }, 200);
            }

            logError(category, operation, error, context = {}) {
                const logEntry = {
                    timestamp: new Date().toISOString(),
                    category,
                    operation,
                    message: error.message,
                    stack: error.stack,
                    context,
                    userAgent: navigator.userAgent,
                    url: window.location.href
                };
                
                this.errorLog.push(logEntry);
                console.error(`[${category}] ${operation}:`, error, context);
                
                // Keep only last 100 errors
                if (this.errorLog.length > 100) {
                    this.errorLog = this.errorLog.slice(-100);
                }
            }

            showErrorModal(title, message, details = {}) {
                document.getElementById('errorMessage').innerHTML = `<strong>${title}</strong><br>${message}`;
                
                let detailsText = `Error Details:\n`;
                detailsText += `Timestamp: ${details.timestamp || new Date().toISOString()}\n`;
                detailsText += `Operation: ${details.operation || 'Unknown'}\n`;
                if (details.country_code) detailsText += `Country Code: ${details.country_code}\n`;
                detailsText += `\nError Message:\n${message}\n`;
                
                if (details.troubleshooting) {
                    detailsText += `\nTroubleshooting Steps:\n`;
                    details.troubleshooting.forEach((step, i) => {
                        detailsText += `${i + 1}. ${step}\n`;
                    });
                }
                
                detailsText += `\nBrowser: ${navigator.userAgent}\n`;
                detailsText += `URL: ${window.location.href}\n`;
                
                document.getElementById('errorDetails').textContent = detailsText;
                document.getElementById('errorModal').style.display = 'block';
            }

            closeErrorModal() {
                document.getElementById('errorModal').style.display = 'none';
            }

            copyErrorDetails() {
                const errorText = document.getElementById('errorDetails').textContent;
                navigator.clipboard.writeText(errorText).then(() => {
                    alert('Error details copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = errorText;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Error details copied to clipboard!');
                });
            }

            downloadErrorLog() {
                const logData = {
                    generated: new Date().toISOString(),
                    application: 'Reference Master Geopolitical - Countries CRUD',
                    version: '1.0.0',
                    totalErrors: this.errorLog.length,
                    errors: this.errorLog
                };
                
                const jsonString = JSON.stringify(logData, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `countries-error-log-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert(`Downloaded error log with ${this.errorLog.length} entries`);
            }
        }

        // Initialize app
        const app = new CountriesCRUD();

        // Global functions
        function openCreateModal() { app.openCreateModal(); }
        function editCountry(code) { app.editCountry(code); }
        function deleteCountry(code) { app.deleteCountry(code); }
        function searchCountries() { app.searchCountries(); }
        function clearFilters() { app.clearFilters(); }
        function loadCountries() { app.loadCountries(); }
        function closeModal() { app.closeModal(); }
        function closeErrorModal() { app.closeErrorModal(); }
        function copyErrorDetails() { app.copyErrorDetails(); }
        function downloadErrorLog() { app.downloadErrorLog(); }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('countryModal');
            const errorModal = document.getElementById('errorModal');
            if (event.target === modal) {
                app.closeModal();
            } else if (event.target === errorModal) {
                app.closeErrorModal();
            }
        }
    </script>
</body>
</html>