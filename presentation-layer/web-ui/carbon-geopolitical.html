<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geopolitical Reference - LASANI Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="carbon-styles.css">
</head>
<body>
    <!-- Carbon Header -->
    <header class="bx--header">
        <a href="carbon-index.html" class="bx--header__name">
            <svg class="bx--header__name--icon" width="20" height="20" viewBox="0 0 32 32" fill="currentColor">
                <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
            </svg>
            <span class="lasani-brand">LASANI Platform</span>
        </a>
        
        <nav class="bx--header__nav">
            <a href="carbon-index.html" class="bx--header__menu-item">Dashboard</a>
            <a href="#" class="bx--header__menu-item bx--header__menu-item--current">Geopolitical</a>
            <a href="carbon-commerce.html" class="bx--header__menu-item">Commerce</a>
            <a href="carbon-tenant.html" class="bx--header__menu-item">Tenants</a>
            <a href="carbon-iam.html" class="bx--header__menu-item">Identity</a>
        </nav>
        
        <div class="bx--header__global">
            <select class="bx--select-input" style="background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 4px 8px;">
                <option>Default Tenant</option>
                <option>Enterprise Corp</option>
                <option>Startup Inc</option>
            </select>
        </div>
    </header>

    <!-- Carbon Side Navigation -->
    <nav class="bx--side-nav">
        <ul class="bx--side-nav__items">
            <li class="bx--side-nav__item">
                <a href="#countries" class="bx--side-nav__link bx--side-nav__link--current" data-entity="countries">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M4 20v2h4.586L2 28.586 3.414 30 10 23.414V28h2V20H4zM30 3.414L28.586 2 22 8.586V4h-2v8h8V10h-4.586L30 3.414z"/>
                    </svg>
                    Countries
                </a>
            </li>
            <li class="bx--side-nav__item">
                <a href="#regions" class="bx--side-nav__link" data-entity="regions">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M27 3H5a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h22a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zM5 5h22v4H5zm0 6h22v16H5z"/>
                    </svg>
                    Regions
                </a>
            </li>
            <li class="bx--side-nav__item">
                <a href="#languages" class="bx--side-nav__link" data-entity="languages">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M13 7H4v2h4v14h2V9h3V7zM22 9h6V7h-8v2h2v14h2V9z"/>
                    </svg>
                    Languages
                </a>
            </li>
            <li class="bx--side-nav__item">
                <a href="#timezones" class="bx--side-nav__link" data-entity="timezones">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M16 30a14 14 0 1 1 14-14 14.016 14.016 0 0 1-14 14zm0-26a12 12 0 1 0 12 12A12.014 12.014 0 0 0 16 4z"/>
                    </svg>
                    Timezones
                </a>
            </li>
            <li class="bx--side-nav__item">
                <a href="#subdivisions" class="bx--side-nav__link" data-entity="subdivisions">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M6 3v2h7v7H3v2h10V3H6zm13 0v11h10v-2h-7V5h7V3H19zM3 19v10h10v-2H6v-7h7v-2H3zm16 0v2h7v7h-7v2h10V19H19z"/>
                    </svg>
                    Subdivisions
                </a>
            </li>
            <li class="bx--side-nav__item">
                <a href="#locales" class="bx--side-nav__link" data-entity="locales">
                    <svg class="bx--side-nav__icon" viewBox="0 0 32 32">
                        <path d="M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm7.75 9h-4.07a19.24 19.24 0 0 0-1.67-6.5A12.1 12.1 0 0 1 23.75 11z"/>
                    </svg>
                    Locales
                </a>
            </li>
        </ul>
    </nav>

    <!-- Carbon Content -->
    <main class="bx--content">
        <!-- Page Header -->
        <div style="margin-bottom: 32px;">
            <h1 style="font: var(--cds-productive-heading-05); margin: 0 0 8px 0; color: var(--cds-text-primary);">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="#0f62fe" style="vertical-align: middle; margin-right: 12px;">
                    <path d="M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm12 13h-6.2a22.57 22.57 0 0 0-2.2-8.88A12.06 12.06 0 0 1 28 15z"/>
                </svg>
                Geopolitical Reference
            </h1>
            <p style="font: var(--cds-body-02); color: var(--cds-text-secondary); margin: 0;">
                Countries, regions, languages, timezones, and localization master data
                <span class="bx--tag bx--tag--green" style="margin-left: 16px;">âœ… Schema Aligned</span>
            </p>
        </div>

        <!-- Carbon Toolbar -->
        <div class="bx--toolbar">
            <div class="bx--toolbar__content">
                <button class="bx--btn bx--btn--primary" id="addBtn">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"/>
                    </svg>
                    Add Record
                </button>
                <button class="bx--btn bx--btn--secondary" id="editBtn" disabled>
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"/>
                    </svg>
                    Edit
                </button>
                <button class="bx--btn bx--btn--danger" id="deleteBtn" disabled>
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M12 12h2v12h-2zm6 0h2v12h-2z"/>
                        <path d="M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z"/>
                        <path d="M12 2h8v2h5v2H7V4h5V2z"/>
                    </svg>
                    Delete
                </button>
            </div>
            <div class="bx--toolbar__content">
                <button class="bx--btn bx--btn--ghost" id="refreshBtn">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M12 10H6.78A11 11 0 0 1 27 16h2A13 13 0 0 0 6 7.68V4H4v8h8z"/>
                    </svg>
                    Refresh
                </button>
                <button class="bx--btn bx--btn--ghost" id="exportBtn">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4z"/>
                    </svg>
                    Export
                </button>
                <span style="font: var(--cds-label-01); color: var(--cds-text-secondary); margin-left: 16px;">
                    <span id="recordCount">0</span> records | 
                    <span id="selectedCount">0</span> selected
                </span>
            </div>
        </div>

        <!-- Carbon Data Table -->
        <div class="bx--data-table-container" style="margin-top: 24px;">
            <table class="bx--data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" id="selectAll" class="bx--checkbox">
                        </th>
                        <th>Code</th>
                        <th>Name</th>
                        <th>ISO3</th>
                        <th>Continent</th>
                        <th>Capital</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Dynamic content -->
                </tbody>
            </table>
        </div>

        <!-- Loading State -->
        <div class="bx--loading" id="loadingIndicator" style="display: none;">
            <svg class="bx--loading__svg" viewBox="0 0 100 100">
                <circle cx="50%" cy="50%" r="44" fill="none" stroke="#0f62fe" stroke-width="4" stroke-dasharray="12.56 12.56" transform="rotate(-90 50 50)"/>
            </svg>
            Loading data...
        </div>

        <!-- No Data State -->
        <div id="noDataMessage" style="display: none; text-align: center; padding: 64px; color: var(--cds-text-secondary);">
            <svg width="64" height="64" viewBox="0 0 32 32" fill="currentColor" style="margin-bottom: 16px;">
                <path d="M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm0 26a12 12 0 1 1 12-12 12.014 12.014 0 0 1-12 12z"/>
            </svg>
            <h3 style="font: var(--cds-productive-heading-03); margin: 0 0 8px 0;">No records found</h3>
            <p style="font: var(--cds-body-01); margin: 0 0 24px 0;">Get started by adding your first record</p>
            <button class="bx--btn bx--btn--primary" onclick="addNewRecord()">Add First Record</button>
        </div>
    </main>

    <!-- Carbon Modal for Add/Edit -->
    <div class="bx--modal" id="editModal" style="display: none;">
        <div class="bx--modal-container">
            <div class="bx--modal-header">
                <h3 class="bx--modal-header__heading" id="modalTitle">Add Country</h3>
                <button class="bx--btn bx--btn--ghost" onclick="closeModal()" style="position: absolute; top: 16px; right: 16px;">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z"/>
                    </svg>
                </button>
            </div>
            <div class="bx--modal-content">
                <form id="recordForm">
                    <div class="bx--form-item">
                        <label class="bx--label" for="countryCode">Country Code *</label>
                        <input type="text" class="bx--text-input" id="countryCode" maxlength="2" required>
                    </div>
                    <div class="bx--form-item">
                        <label class="bx--label" for="countryName">Country Name *</label>
                        <input type="text" class="bx--text-input" id="countryName" required>
                    </div>
                    <div class="bx--form-item">
                        <label class="bx--label" for="iso3Code">ISO3 Code</label>
                        <input type="text" class="bx--text-input" id="iso3Code" maxlength="3">
                    </div>
                    <div class="bx--form-item">
                        <label class="bx--label" for="continentCode">Continent</label>
                        <div class="bx--select">
                            <select class="bx--select-input" id="continentCode">
                                <option value="">Select continent</option>
                                <option value="AF">Africa</option>
                                <option value="AS">Asia</option>
                                <option value="EU">Europe</option>
                                <option value="NA">North America</option>
                                <option value="SA">South America</option>
                                <option value="OC">Oceania</option>
                                <option value="AN">Antarctica</option>
                            </select>
                        </div>
                    </div>
                    <div class="bx--form-item">
                        <label class="bx--label" for="capitalCity">Capital City</label>
                        <input type="text" class="bx--text-input" id="capitalCity">
                    </div>
                </form>
            </div>
            <div class="bx--modal-footer">
                <button class="bx--btn bx--btn--secondary" onclick="closeModal()">Cancel</button>
                <button class="bx--btn bx--btn--primary" onclick="saveRecord()">Save</button>
            </div>
        </div>
    </div>

    <script>
        let currentEntity = 'countries';
        let selectedRows = new Set();
        let editingRowId = null;

        // Sample data
        const sampleData = {
            countries: [
                { id: 1, code: 'US', name: 'United States', iso3: 'USA', continent: 'NA', capital: 'Washington D.C.', active: true },
                { id: 2, code: 'CA', name: 'Canada', iso3: 'CAN', continent: 'NA', capital: 'Ottawa', active: true },
                { id: 3, code: 'GB', name: 'United Kingdom', iso3: 'GBR', continent: 'EU', capital: 'London', active: true },
                { id: 4, code: 'DE', name: 'Germany', iso3: 'DEU', continent: 'EU', capital: 'Berlin', active: true },
                { id: 5, code: 'JP', name: 'Japan', iso3: 'JPN', continent: 'AS', capital: 'Tokyo', active: true }
            ],
            regions: [
                { id: 1, code: 'NA', name: 'North America', type: 'CONTINENT', active: true },
                { id: 2, code: 'EU', name: 'Europe', type: 'CONTINENT', active: true },
                { id: 3, code: 'AS', name: 'Asia', type: 'CONTINENT', active: true }
            ]
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadEntityData('countries');
            
            // Entity navigation
            document.querySelectorAll('[data-entity]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const entity = this.getAttribute('data-entity');
                    switchEntity(entity);
                });
            });

            // Toolbar buttons
            document.getElementById('addBtn').addEventListener('click', () => openModal());
            document.getElementById('editBtn').addEventListener('click', () => editSelected());
            document.getElementById('deleteBtn').addEventListener('click', () => deleteSelected());
            document.getElementById('refreshBtn').addEventListener('click', () => loadEntityData(currentEntity));
        });

        function switchEntity(entity) {
            // Update navigation
            document.querySelectorAll('.bx--side-nav__link').forEach(link => {
                link.classList.remove('bx--side-nav__link--current');
            });
            document.querySelector(`[data-entity="${entity}"]`).classList.add('bx--side-nav__link--current');
            
            currentEntity = entity;
            selectedRows.clear();
            updateToolbarState();
            loadEntityData(entity);
        }

        function loadEntityData(entity) {
            const loadingIndicator = document.getElementById('loadingIndicator');
            const tableContainer = document.querySelector('.bx--data-table-container');
            const noDataMessage = document.getElementById('noDataMessage');
            
            loadingIndicator.style.display = 'flex';
            tableContainer.style.display = 'none';
            noDataMessage.style.display = 'none';
            
            setTimeout(() => {
                loadingIndicator.style.display = 'none';
                
                const data = sampleData[entity] || [];
                if (data.length > 0) {
                    renderTable(data);
                    tableContainer.style.display = 'block';
                } else {
                    noDataMessage.style.display = 'block';
                }
                
                updateRecordCount(data.length);
            }, 500);
        }

        function renderTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = data.map(item => `
                <tr data-id="${item.id}" onclick="toggleRowSelection(${item.id})">
                    <td>
                        <input type="checkbox" class="bx--checkbox row-select" data-id="${item.id}">
                    </td>
                    <td>${item.code}</td>
                    <td>${item.name}</td>
                    <td>${item.iso3 || item.type || '-'}</td>
                    <td>${item.continent || item.parent || '-'}</td>
                    <td>${item.capital || '-'}</td>
                    <td>
                        <span class="bx--tag ${item.active ? 'bx--tag--green' : 'bx--tag--gray'}">
                            ${item.active ? 'Active' : 'Inactive'}
                        </span>
                    </td>
                    <td>
                        <button class="bx--btn bx--btn--ghost" onclick="editRecord(${item.id}); event.stopPropagation();">
                            <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor">
                                <path d="M2 26h28v2H2z"/>
                            </svg>
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add row selection handlers
            document.querySelectorAll('.row-select').forEach(checkbox => {
                checkbox.addEventListener('change', function(e) {
                    e.stopPropagation();
                    const id = parseInt(this.getAttribute('data-id'));
                    if (this.checked) {
                        selectedRows.add(id);
                    } else {
                        selectedRows.delete(id);
                    }
                    updateToolbarState();
                });
            });
        }

        function toggleRowSelection(id) {
            const checkbox = document.querySelector(`input[data-id="${id}"]`);
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                selectedRows.add(id);
            } else {
                selectedRows.delete(id);
            }
            updateToolbarState();
        }

        function updateToolbarState() {
            const hasSelection = selectedRows.size > 0;
            document.getElementById('editBtn').disabled = !hasSelection;
            document.getElementById('deleteBtn').disabled = !hasSelection;
            document.getElementById('selectedCount').textContent = selectedRows.size;
        }

        function updateRecordCount(count) {
            document.getElementById('recordCount').textContent = count;
        }

        function openModal(record = null) {
            editingRowId = record?.id || null;
            document.getElementById('modalTitle').textContent = record ? 'Edit Country' : 'Add Country';
            
            if (record) {
                document.getElementById('countryCode').value = record.code || '';
                document.getElementById('countryName').value = record.name || '';
                document.getElementById('iso3Code').value = record.iso3 || '';
                document.getElementById('continentCode').value = record.continent || '';
                document.getElementById('capitalCity').value = record.capital || '';
            } else {
                document.getElementById('recordForm').reset();
            }
            
            document.getElementById('editModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
            editingRowId = null;
        }

        function saveRecord() {
            // Validation and save logic here
            console.log('Saving record...');
            closeModal();
            loadEntityData(currentEntity);
        }

        function editRecord(id) {
            const data = sampleData[currentEntity];
            const record = data.find(item => item.id === id);
            if (record) {
                openModal(record);
            }
        }

        function editSelected() {
            if (selectedRows.size === 1) {
                const id = Array.from(selectedRows)[0];
                editRecord(id);
            }
        }

        function deleteSelected() {
            if (selectedRows.size > 0 && confirm(`Delete ${selectedRows.size} selected record(s)?`)) {
                console.log('Deleting records:', Array.from(selectedRows));
                selectedRows.clear();
                updateToolbarState();
                loadEntityData(currentEntity);
            }
        }

        function addNewRecord() {
            openModal();
        }
    </script>
</body>
</html>